import{j as e,P as v,r as u,u as $,B as q,a as T,b as w,c as O}from"./index-36060215.js";import{d as B}from"./DashboardRounded-23261fc3.js";import{r as k,i as I,I as z}from"./createSvgIcon-be983189.js";import{u as M}from"./index.esm-b331fc7d.js";import{P as A,h as H,E as V}from"./ErrorSnackbar-68b55082.js";import{T as l}from"./Typography-24d6f046.js";import{T as W}from"./TextField-f244debb.js";import{B as x}from"./Box-c89578f5.js";import"./Popover-0a4585bd.js";import"./extendSxProp-5febf8e6.js";import"./List-0f24711b.js";var L={},N=I;Object.defineProperty(L,"__esModule",{value:!0});var R=L.default=void 0,U=N(k()),Y=e,G=(0,U.default)((0,Y.jsx)("path",{d:"M18 19H6c-.55 0-1-.45-1-1V6c0-.55.45-1 1-1h12c.55 0 1 .45 1 1v12c0 .55-.45 1-1 1zm1-16H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlankRounded");R=L.default=G;var D={},Q=I;Object.defineProperty(D,"__esModule",{value:!0});var E=D.default=void 0,J=Q(k()),K=e,X=(0,J.default)((0,K.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8.29 13.29c-.39.39-1.02.39-1.41 0L5.71 12.7a.9959.9959 0 0 1 0-1.41c.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.58 7.59z"}),"CheckBoxRounded");E=D.default=X;const Z="_centerLoginPage_1mld8_1",F="_loginImg_1mld8_14",ee="_mainDiv_1mld8_20",te="_dialog_1mld8_24",ne="_form_1mld8_28",_={centerLoginPage:Z,loginImg:F,mainDiv:ee,dialog:te,form:ne};v.bool.isRequired,v.func.isRequired,v.string.isRequired,v.string.isRequired;const ae=()=>{var h,S;const{register:a,control:n,handleSubmit:c,formState:i,reset:m,getValues:p}=M(),{errors:o,isSubmitSuccessful:r}=i,[d,y]=u.useState(!1),[s,f]=u.useState(!1),j=()=>{y(g=>!g)},b=()=>{f(g=>!g)};return{loginFormObject:[{title:"APC Email",id:"email",name:"email",type:"email",ariaLabel:"Email field",hookForm:{...a("email",{required:{value:!0,message:"Email is required"},pattern:{value:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/,message:"Invalid email format"},validate:{APCEmail:g=>g.endsWith("apc.edu.ph")||"Enter your APC-Microsoft365 account"}})},errors:(h=o.email)==null?void 0:h.message,dialog:{title:"Email Credential Help",content:"You can set my maximum width and whether to adapt or not.",isOpen:d,onClick:j}},{title:"Password",id:"password",name:"password",type:"password",ariaLabel:"Password field",hookForm:{...a("password",{required:{value:!0,message:"Password is required"},validate:{minCharacters:g=>g.length>=8||"Minimum of 8 characters"}})},errors:(S=o.password)==null?void 0:S.message,dialog:{title:"Password Credential Help",content:"You can set my maximum width and whether to adapt or not.",isOpen:s,onClick:b}}],handleSubmit:c,errors:o,isSubmitSuccessful:r,reset:m,control:n,getValues:p}},se="/login",oe=async a=>{try{return(await A.post(se,a)).data}catch(n){return H(n)}},re=()=>{const[a,n]=u.useState(!1),[c,i]=u.useState(null),[m,p]=u.useState(null),[o,r]=u.useState(null);return{handleLogin:async y=>{try{n(!0);const s=await oe(y);if((s==null?void 0:s.status)===!1){r(s.message),n(!1);return}p(s==null?void 0:s.data),n(!1),i(s==null?void 0:s.message)}catch(s){console.error(s),r(s),n(!1)}},userData:m,isLoginLoading:a,isLoginSuccess:c,isLoginError:o,setLoginSuccess:i,setLoginError:r}},ie="_helpIconLight_15d4v_1",le="_helpIconDark_15d4v_6",C={helpIconLight:ie,helpIconDark:le};function ce(){const{setAuthDataAndUserData:a}=$(),{loginFormObject:n,handleSubmit:c,reset:i,getValues:m}=ae(),{handleLogin:p,userData:o,isLoginLoading:r,isLoginError:d,setLoginError:y}=re(),[s,f]=u.useState(!1),j=()=>{f(t=>!t)},b=()=>{const t=m(),h={...t,remember_me:s};p(h),console.log(t)};return u.useEffect(()=>{o&&(a(o),i())},[a,o,i]),e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{width:"100%",padding:"0 8px"},children:e.jsxs("form",{onSubmit:c(b),className:C.form,noValidate:!0,children:[n==null?void 0:n.map((t,h)=>e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx("div",{style:{width:"100%"},children:e.jsx("label",{htmlFor:t==null?void 0:t.name,children:e.jsx(l,{fontWeight:"600",component:"span",color:"neutral.main",children:t.title})})}),e.jsx(W,{id:t==null?void 0:t.id,name:t==null?void 0:t.name,...t==null?void 0:t.hookForm,type:t==null?void 0:t.type,variant:"outlined",fullWidth:!0,width:"100%",color:"secondary","aria-label":t==null?void 0:t.ariaLabel}),e.jsx(l,{color:"error",paddingTop:"4px",children:t==null?void 0:t.errors})]},h)),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"8px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(z,{component:"button",value:"check",disableRipple:!0,size:"small",onClick:j,"aria-label":"Remember me for 7 days",children:s?e.jsx(E,{color:"secondary"}):e.jsx(R,{sx:{color:"neutral.main"}})}),e.jsx(l,{component:"p",color:"neutral.main",fontWeight:500,children:"Remember me for 7 days"})]}),e.jsx(q,{variant:"contained",type:"submit",size:"large",className:C.loginBtn,color:"secondary","aria-label":"Sign in",disabled:r,children:r?e.jsx(l,{variant:"h6",children:"Loading..."}):e.jsx(l,{variant:"h6",children:"Sign in"})})]})]})}),e.jsx(V,{error:d,setError:y})]})}function P({isMd:a}){const n={display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:"4px",marginTop:`${a?"32px":"54px"}`},{handleOpenTermsModal:c}=T();return e.jsxs(x,{sx:n,color:"neutral.main",children:[e.jsx(l,{fontWeight:"700",component:"span",children:"The Polarber Group Â© 2023"}),e.jsx(l,{onClick:c,sx:{cursor:"pointer"},children:"Terms and Conditions"})]})}P.propTypes={isMd:v.bool.isRequired};function be(){const a=w(d=>d.breakpoints.down("custom420")),n=w(d=>d.breakpoints.down("md")),i={backgroundColor:`${O().palette.secondary.login}`},m={display:"flex",flexDirection:`${n?"column":"row"}`,justifyContent:"center",alignItems:"center",maxWidth:`${n?"480px":"100%"}`,maxHeight:`${a?"100vh":"640px"}`,height:"100%",bgcolor:`${a?"":"background.login"}`,margin:`${a?"0":"8%"}`,gap:`${n?"16px":"0"}`,borderRadius:`${a?"":"16px"}`},p={display:"flex",justifyContent:"center",alignItems:"center",width:`${n?"100%":"50%"}`,height:"100%",borderRadius:`${a?"0 0 32px 32px":"16px"}`,overflow:"hidden"},o={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:`${n?"100%":"50%"}`,maxHeight:"640px",padding:`${n&&!a?"0 8% 8% 8%":a?"0 4% 8% 4%":"32px"}`},r={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:`${n?"16px 0 16px 0":"32px 0 32px 0"}`};return e.jsx("div",{style:i,className:_.centerLoginPage,children:e.jsxs(x,{sx:m,className:_.mainDiv,boxShadow:2,children:[e.jsx(x,{sx:p,children:e.jsx("img",{src:"http://jbberbon.github.io/pahiram/assets/login2.jpg",className:_.loginImg,alt:"Cat taking a selfie"})}),e.jsxs(x,{sx:o,children:[e.jsxs(x,{sx:r,children:[e.jsxs(x,{display:"flex",alignItems:"center",children:[e.jsx("span",{style:{lineHeight:1},children:e.jsx(B,{style:{fontSize:"2.5rem"},color:"primary"})}),e.jsx(l,{variant:"h1",component:"h1",lineHeight:.8,color:"primary",children:"Pahiram"})]}),e.jsx(l,{variant:"h5",component:"span",color:"neutral.main",children:"APC Equipment Lending System"})]}),e.jsx(ce,{}),e.jsx(P,{isMd:n})]})]})})}export{be as default};
