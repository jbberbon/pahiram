import{P as j,C as E,j as e,h as F,r as v,g as k}from"./index-36060215.js";import{T as c,P as g,I as B}from"./PageTitle-66c86fbe.js";import{M as O}from"./MainDisplayLayout-22058112.js";import{u as W,a as G}from"./useGetSpecificResource-d827c7df.js";import{E as N}from"./EndorsementItemCard-2d3026de.js";import{E as I}from"./ErrorSnackbar-68b55082.js";import{g as H,a as V}from"./borrowRequestEndpoints-e9facb43.js";import{C as X,D as P,a as Y}from"./CustomModal-fc4ee557.js";import{T as $,a as J,b as z,c as K,d as f,f as Q,e as U,g as Z}from"./BorrowedItemStatusConstantHelper-916d5fea.js";import{f as q}from"./BorrowPurposeConstantHelper-9c404c95.js";import{f as M,a}from"./PenalizedTransacStatusConstantHelper-7fea81e0.js";import{I as D}from"./createSvgIcon-be983189.js";import"./Popover-0a4585bd.js";import"./Typography-24d6f046.js";import"./extendSxProp-5febf8e6.js";import"./SidebarStore-a30a0086.js";import"./ItemCard-58412a24.js";import"./subtle-prism-5d1a98b4.js";import"./BORROW_PURPOSES-6419a447.js";const y=["ID","Item","Penalty","Start Date","End Date","Date Returned","Status"],h={padding:"12px 12px 12px 0",margin:0,fontSize:"0.875rem",whiteSpace:"nowrap"},R=({items:i})=>{const{neutralMain:p}=E();return e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs($,{sx:{minWidth:"400px"},"aria-label":"borrowed items table",children:[e.jsx(J,{children:e.jsx(z,{children:y==null?void 0:y.map((l,r)=>e.jsx(c,{style:{padding:`0 ${r===(y==null?void 0:y.length)-1?"0":"12px"} 12px 0`,margin:0,fontSize:"0.875rem",whiteSpace:"nowrap",fontWeight:"700",color:p},children:l},l))})}),e.jsx(K,{children:i==null?void 0:i.map((l,r)=>{var o;return e.jsxs(z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsx(c,{component:"th",scope:"row",style:{...h,color:p},children:l==null?void 0:l.apc_item_id}),e.jsx(c,{component:"th",scope:"row",style:h,children:l==null?void 0:l.model_name}),e.jsx(c,{component:"th",scope:"row",style:h,children:M(l==null?void 0:l.penalty)}),e.jsx(c,{component:"th",scope:"row",style:h,children:f(l==null?void 0:l.start_date)}),e.jsx(c,{component:"th",scope:"row",style:h,children:f(l==null?void 0:l.due_date)}),e.jsx(c,{component:"th",scope:"row",style:h,children:f(l==null?void 0:l.date_returned)}),e.jsx(c,{component:"th",scope:"row",style:h,children:e.jsx(X,{label:(o=Q(l==null?void 0:l.status))==null?void 0:o.status,size:"small",variant:"outlined",color:"primary"})})]},r)})})]})})};R.propTypes={items:j.array.isRequired};const C=({transacData:i})=>{const{neutralMain:p}=E(),l={display:"flex",flexDirection:"row",alignItems:"start"},r={fontWeight:"700",padding:0,margin:0,whiteSpace:"nowrap",minWidth:"110px",fontSize:"0.875rem",color:p},o={padding:0,margin:0,fontSize:"0.875rem",color:p};return e.jsxs(e.Fragment,{children:[e.jsx(P,{textAlign:"left",sx:{"&:before":{width:0},"& .MuiDivider-wrapper":{padding:"0 16px 0 0"}},children:e.jsx(g,{fontSize:"1rem",children:"Payment Details"})}),e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:l,children:[e.jsx("p",{style:r,children:"Receipt"}),e.jsx("p",{style:o,children:i==null?void 0:i.receipt_number})]}),e.jsxs("div",{style:l,children:[e.jsx("p",{style:r,children:"Settled On"}),e.jsx("p",{style:o,children:i!=null&&i.paid_at?f(i==null?void 0:i.paid_at):i!=null&&i.settled_at?f(i==null?void 0:i.settled_at):"n/a"})]}),e.jsxs("div",{style:l,children:[e.jsx("p",{style:r,children:"Remarks"}),e.jsx("p",{style:o,children:(i==null?void 0:i.remarks_by_finance_supervisor)||(i==null?void 0:i.remarks_by_cashier)||"n/a"})]})]})]})};C.propTypes={transacData:j.object.isRequired};const ee="SETTLED",se="PAID",L=({specificResource:i,isModalOpen:p,setIsModalOpen:l})=>{const{isSm:r}=F(),{neutralMain:o}=E(),n={display:"flex",flexDirection:"row",alignItems:"start"},d={fontWeight:"700",padding:0,margin:0,whiteSpace:"nowrap",minWidth:"110px",fontSize:"0.875rem",color:o},t={padding:0,margin:0,fontSize:"0.875rem",color:o},s=i==null?void 0:i.transac_data,S=i==null?void 0:i.items,w=s!=null&&s.id?(s==null?void 0:s.id.slice(0,20))+"...":"",T=s!=null&&s.created_at?f(s==null?void 0:s.created_at):"",m=q(s==null?void 0:s.purpose),u=a(s==null?void 0:s.penalty_status),b=(s==null?void 0:s.penalty_status)===se||(s==null?void 0:s.penalty_status)===ee;return e.jsx(e.Fragment,{children:e.jsx(Y,{isModalOpen:p,setModalOpen:()=>{l(!1)},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",width:"100%",padding:r?"20px":"18px",gap:"16px",margin:"auto"},children:[e.jsx(P,{textAlign:"left",sx:{"&:before":{width:0},"& .MuiDivider-wrapper":{padding:"0 16px 0 0"}},children:e.jsx(g,{fontSize:"1rem",children:"Transaction"})}),e.jsxs("div",{style:n,children:[e.jsx("p",{style:d,children:"Request ID"}),e.jsx("p",{style:t,children:r?w:s==null?void 0:s.id}),e.jsx(D,{onClick:()=>U(s==null?void 0:s.id),sx:{marginLeft:"auto","&:focus":{outline:"none"}},children:e.jsx(Z,{sx:{fontSize:"14px"}})})]}),e.jsxs("div",{style:n,children:[e.jsx("p",{style:d,children:"Borrower"}),e.jsx("p",{style:t,children:s==null?void 0:s.borrower})]}),e.jsxs("div",{style:n,children:[e.jsx("p",{style:d,children:"Office"}),e.jsx("p",{style:t,children:s==null?void 0:s.department})]}),e.jsxs("div",{style:n,children:[e.jsx("p",{style:d,children:"Submitted on"}),e.jsx("p",{style:t,children:T})]}),e.jsxs("div",{style:n,children:[e.jsx("p",{style:d,children:"Purpose"}),e.jsxs("p",{style:t,children:[m==null?void 0:m.purpose,", ",s==null?void 0:s.user_defined_purpose]})]}),e.jsxs("div",{style:n,children:[e.jsx("p",{style:d,children:"Endorser"}),e.jsx("p",{style:t,children:s!=null&&s.endorser?s==null?void 0:s.endorser:"None"})]}),e.jsxs("div",{style:n,children:[e.jsx("p",{style:d,children:"Penalty Status"}),e.jsx("p",{style:t,children:u==null?void 0:u.status})]}),e.jsxs("div",{style:n,children:[e.jsx("p",{style:d,children:"Amount"}),e.jsx("p",{style:t,children:s!=null&&s.penalty?M(s==null?void 0:s.penalty):""})]}),e.jsx(P,{textAlign:"left",sx:{"&:before":{width:0},"& .MuiDivider-wrapper":{padding:"0 16px 0 0"},marginTop:"16px"},children:e.jsx(g,{fontSize:"1rem",children:"Requested Items"})}),S&&e.jsx(R,{items:S}),s&&b&&e.jsx(C,{transacData:s})]})})})};L.propTypes={specificResource:j.object,isModalOpen:j.bool.isRequired,setIsModalOpen:j.func.isRequired};const _=({filter:i,sectionTitle:p})=>{const[l,r]=v.useState(!1),{list:o,isGetListLoading:n,isGetListError:d,setIsGetListError:t,getRequestList:s}=W(),S=i?"?"+i:"";v.useEffect(()=>{s(H+S)},[]);const{specificResource:w,isLoadingSpecificResource:T,isErrorSpecificResource:m,setIsErrorSpecificResource:u,fetchSpecificResource:b}=G(),A=x=>V(x);return e.jsxs(e.Fragment,{children:[e.jsx(g,{fontSize:"1.2rem",children:p}),e.jsx("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap",width:"100%"},children:n?e.jsx(k,{}):e.jsxs(e.Fragment,{children:[(o==null?void 0:o.length)>0&&(o==null?void 0:o.map(x=>e.jsx(N,{transacData:x,onClick:()=>{b(A,x==null?void 0:x.id),T||r(!0)}},x==null?void 0:x.id))),(o==null?void 0:o.length)===0&&e.jsx("p",{style:{width:"100%",textAlign:"center"},children:"No requests found."})]})}),w&&e.jsx(L,{specificResource:w,isModalOpen:l,setIsModalOpen:r}),e.jsx(I,{error:d,setError:t}),e.jsx(I,{error:m,setError:u})]})};_.propTypes={filter:j.string,sectionTitle:j.string.isRequired};const Te=()=>e.jsx(e.Fragment,{children:e.jsx(O,{children:e.jsxs(B,{children:[e.jsx(g,{children:"Penalized Transactions"}),e.jsx(_,{sectionTitle:"Pending Payment",filter:"status=PENDING_PAYMENT"}),e.jsx(_,{sectionTitle:"Settled Penalties",filter:"status=PAID"})]})})});export{Te as default};
